package cz.crynet.hitbtc_ws;

import cz.crynet.hitbtc_ws.domain.OrderBookWs;
import lombok.extern.slf4j.Slf4j;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

import java.util.concurrent.atomic.AtomicInteger;

@SpringBootApplication
@Slf4j
public class App implements CommandLineRunner {

	private static final String[] symbolNames = new String[]{"BCNBTC", "BTCTUSD", "LTCTUSD", "XMRTUSD", "ZRXTUSD", "NEOTUSD", "USDTUSD", "BTCDAI", "ETHDAI", "MKRDAI", "EOSDAI", "USDDAI", "MKRBTC", "MKRETH", "MKRUSD", "TUSDDAI", "NEODAI", "LTCDAI", "XMRDAI", "XRPDAI", "NEXOETH", "NEXOUSD", "APPCBTC", "APPCETH", "APPCUSD", "BITETH", "SPCBTC", "SPCETH", "SPCUSD", "REXBTC", "REXETH", "REXUSD", "ELFBTC", "ELFUSD", "BCDBTC", "BCDUSD", "CVCOINBTC", "CVCOINETH", "CVCOINUSD", "EDGETH", "EDGUSD", "NLC2BTC", "DASHEURS", "ZECEURS", "BTCEURS", "EOSEURS", "ETHEURS", "LTCEURS", "NEOEURS", "XMREURS", "XRPEURS", "EURSUSD", "EURSTUSD", "EURSDAI", "ROXETH", "ZPRETH", "KINDBTC", "KINDETH", "PMABTC", "PMAETH", "TVBTC", "TVETH", "TVUSD", "BATBTC", "BATETH", "BATUSD", "SRNBTC", "SRNETH", "SRNUSD", "GSTBTC", "GSTETH", "GSTUSD", "BNBBTC", "BNBETH", "BNBUSD", "DITBTC", "DITETH", "POA20BTC", "POA20ETH", "POA20USD", "POA20DAI", "NIMBTC", "USEBTC", "USEETH", "DAVBTC", "DAVETH", "ABTCBTC", "NIMETH", "BCNEOS", "LTCEOS", "XMREOS", "DASHEOS", "TRXEOS", "NEOEOS", "ZECEOS", "LSKEOS", "XEMEOS", "XRPEOS", "RCNBTC", "RCNETH", "RCNUSD", "HMQBTC", "HMQETH", "MYSTBTC", "MYSTETH", "USDTGUSD", "BTCGUSD", "ETHGUSD", "EOSGUSD", "AXPRBTC", "AXPRETH", "DAGBTC", "DAGETH", "VETBTC", "VETETH", "VETUSDT", "SILKETH", "BOXBTC", "BOXETH", "BOXEURS", "BOXEOS", "PASSBTC", "PASSETH", "PBTTBTC", "PMAUSD", "TRADBTC", "DGTXBTC", "DGTXETH", "DGTXUSD", "DGBTUSD", "SNBLBTC", "BCHBTC", "BCHUSD", "BSVBTC", "BSVUSD", "NPLCBTC", "NPLCETH", "ETNBTC", "ETNETH", "ETNUSD", "DTRBTC", "DTRETH", "TDPBTC", "HBTETH", "PXGBTC", "PXGUSD", "BTCPAX", "ETHPAX", "USDPAX", "BTCUSDC", "ETHUSDC", "USDUSDC", "TUSDUSDC", "DAIUSDC", "EOSPAX", "CLOBTC", "CLOETH", "CLOUSD", "BRDBTC", "BRDETH", "NMRBTC", "SALTBTC", "SALTETH", "POLYBTC", "POLYETH", "POWRBTC", "POWRETH", "STORJBTC", "STORJETH", "STORJUSD", "MLNBTC", "MLNETH", "BDGBTC", "POAETH", "POABTC", "POAUSD", "POADAI", "KINBTC", "VEOBTC", "PLABTC", "PLAETH", "PLAUSD", "BTTBTC", "BTTUSD", "BTTETH", "ZENBTC", "ZENETH", "ZENUSD", "GRINBTC", "GRINETH", "GRINUSD", "FETBTC", "HTBTC", "HTUSD", "XZCBTC", "XZCETH", "XZCUSD", "VRABTC", "VRAETH", "WBTCETH", "CROBTC", "CROETH", "CROUSD", "GASBTC", "GASETH", "GASUSD", "ORMEUSBTC", "ORMEUSETH", "SWMETH", "SWMUSD", "PREETH", "PHXBTC", "PHXETH", "PHXUSD", "BETBTC", "USDEOSDT", "BTCEOSDT", "ETHEOSDT", "EOSEOSDT", "DAIEOSDT", "NUTBTC", "NUTEOS", "NUTUSD", "CUTEBTC", "CUTEETH", "CUTEUSD", "CUTEEOS", "XCONBTC", "DCRBTC", "DCRETH", "DCRUSD", "MGBTC", "MGETH", "MGEOS", "MGUSD", "GNXBTC", "PROBTC", "EURSEOSDT", "TUSDEOSDT", "AGIBTC", "LOOMBTC", "LOOMETH", "BLZBTC", "QKCBTC", "QKCETH", "KNCBTC", "KNCETH", "KNCUSD", "KEYBTC", "KEYETH", "ATOMBTC", "ATOMUSD", "ATOMETH", "BRDGBTC", "BRDGETH", "BRDGUSD", "MTLBTC", "MTLETH", "EXPBTC", "BTCBBTC", "PBTBTC", "PBTETH", "LINKBTC", "LINKETH", "LINKUSD", "PHBBTC", "BCHETH", "BCHDAI", "BCHTUSD", "BCHEURS", "DAPPBTC", "DAPPEOS", "DENTBTC", "DENTUSD", "XRCBTC", "EOSBCH", "LTCBCH", "XRPBCH", "TRXBCH", "XLMBCH", "ETCBCH", "DASHBCH", "ZECBCH", "LAMBBTC", "NPXSBTC", "HBARBTC", "HBARUSD", "ONEBTC", "RFRBTC", "RFRUSD", "BUSDUSD", "PAXGBTC", "PAXGUSD", "RENBTC", "IGNISBTC", "CELBTC", "CELETH", "WINUSD", "ADKBTC", "PARTBTC", "WAVESUSD", "ADABCH", "ONTBCH", "XMRBCH", "ATOMBCH", "LINKBCH", "OMGBCH", "WAVESBCH", "IOTXBTC", "HOTBTC", "SLVBTC", "HEDGBTC", "CHZBTC", "CHZUSD", "COCOSBTC", "COCOSUSD", "SEELEBTC", "SEELEUSD", "MDABTC", "LEOUSD", "REMBTC", "REMETH", "REMUSD", "BTCBUSD", "RVNBTC", "BSTBTC", "ERDBTC", "KRLBTC", "FTTBTC", "FTTUSD", "RAISEBTC", "RAISEETH", "NAVBTC", "NAVUSD", "PADUSD", "AVABTC", "AVAETH", "AVAUSD", "PLBTETH", "APLUSD", "ETHBNTBTC", "USDIDRT", "MINBTC", "GTBTC", "MATICBTC", "SOLVEBTC", "BDPBTC", "BDPETH", "BDPUSD", "NWCUSD", "NWCBTC", "CELRBTC", "VSYSBTC", "VSYSUSD", "MOFBTC", "EXMBTC", "ROOBEEBTC", "IPXBTC", "IPXUSD", "UBTBTC", "ARPABTC", "ARPAUSD", "IDRTBTC", "VITAEBTC", "EMRXBTC", "ALGOBTC", "ALGOETH", "ALGOUSD", "OKBBTC", "APMBTC", "USGBTC", "USGETH", "USGUSD", "BTCUSD", "DASHBTC", "DOGEBTC", "DOGEUSD", "EMCBTC", "ETHBTC", "LSKBTC", "LTCBTC", "LTCUSD", "NXTBTC", "SBDBTC", "SCBTC", "STEEMBTC", "XDNBTC", "XEMBTC", "XMRBTC", "ARDRBTC", "ZECBTC", "WAVESBTC", "MAIDBTC", "DGDBTC", "SNGLSBTC", "1STBTC", "TRSTBTC", "TIMEBTC", "GNOBTC", "REPBTC", "XMRUSD", "DASHUSD", "ETHUSD", "NXTUSD", "ZRCBTC", "BOSBTC", "DCTBTC", "ANTBTC", "AEONBTC", "GUPBTC", "PLUBTC", "LUNBTC", "EDGBTC", "RLCBTC", "SWTBTC", "TKNBTC", "WINGSBTC", "XAURBTC", "AEBTC", "PTOYBTC", "ZECUSD", "XEMUSD", "BCNUSD", "XDNUSD", "MAIDUSD", "ETCBTC", "ETCUSD", "PLBTBTC", "BNTBTC", "SNTETH", "CVCUSD", "PAYETH", "OAXETH", "OMGETH", "BQXETH", "XTZBTC", "DICEBTC", "PTOYETH", "1STETH", "XAURETH", "TIMEETH", "DICEETH", "SWTETH", "XMRETH", "ETCETH", "DASHETH", "ZECETH", "PLUETH", "GNOETH", "XRPBTC", "STRATUSD", "STRATBTC", "SNCETH", "ADXETH", "BETETH", "EOSETH", "DENTETH", "SANETH", "EOSBTC", "EOSUSD", "XTZETH", "XTZUSD", "MYBETH", "SURETH", "IXTETH", "PLRETH", "TIXETH", "PROETH", "AVTETH", "EVXUSD", "DLTBTC", "BNTETH", "BNTUSD", "MANAUSD", "DNTBTC", "FYPBTC", "OPTBTC", "TNTETH", "STXBTC", "STXETH", "STXUSD", "TNTUSD", "TNTBTC", "XUCUSD", "SNCBTC", "SNCUSD", "OAXUSD", "OAXBTC", "ZRXBTC", "ZRXETH", "ZRXUSD", "PPCBTC", "PPCUSD", "QTUMETH", "IGNISETH", "BMCBTC", "BMCETH", "BMCUSD", "CNDBTC", "CNDETH", "CNDUSD", "CDTETH", "CDTUSD", "FUNBTC", "FUNETH", "FUNUSD", "HVNBTC", "HVNETH", "POEBTC", "POEETH", "AMBUSD", "AMBETH", "AMBBTC", "PPTETH", "MTHBTC", "MTHETH", "LRCBTC", "LRCETH", "ICXBTC", "ICXETH", "NEOBTC", "NEOETH", "NEOUSD", "ICXUSD", "INDETH", "KICKBTC", "YOYOWBTC", "CDTBTC", "XVGBTC", "XVGETH", "XVGUSD", "DGBBTC", "DGBETH", "DGBUSD", "DCNETH", "DCNUSD", "VIBEBTC", "ENJBTC", "ENJETH", "ENJUSD", "ZSCBTC", "ZSCETH", "ZSCUSD", "TRXBTC", "TRXETH", "TRXUSD", "ARTBTC", "EVXBTC", "EVXETH", "SUBBTC", "SUBETH", "SUBUSD", "WTCBTC", "BTMBTC", "BTMETH", "BTMUSD", "LIFEBTC", "VIBBTC", "VIBETH", "VIBUSD", "DRTETH", "OMGBTC", "PAYBTC", "PPTBTC", "SNTBTC", "BTGBTC", "BTGETH", "BTGUSD", "SMARTBTC", "SMARTETH", "SMARTUSD", "XUCETH", "XUCBTC", "LAETH", "EDOBTC", "EDOETH", "EDOUSD", "HGTETH", "IXTBTC", "SCLBTC", "ETPBTC", "ETPETH", "ETPUSD", "NEBLBTC", "NEBLETH", "ARNBTC", "ARNETH", "GVTETH", "BTXBTC", "LTCETH", "BCNETH", "MAIDETH", "NXTETH", "STRATETH", "XDNETH", "XEMETH", "PLRBTC", "SURBTC", "BQXBTC", "DOGEETH", "AMMBTC", "AMMETH", "AMMUSD", "DBIXBTC", "PREBTC", "ZAPBTC", "DOVBTC", "DOVETH", "XRPETH", "XRPUSDT", "HSRBTC", "LENDBTC", "LENDETH", "SPFETH", "SBTCBTC", "SBTCETH", "LOCBTC", "LOCETH", "LOCUSD", "SWFTCBTC", "SWFTCETH", "SWFTCUSD", "STARETH", "SBTCUSDT", "STORMBTC", "DIMETH", "DIMUSD", "DIMBTC", "NGCBTC", "NGCETH", "NGCUSD", "EMCETH", "EMCUSDT", "MCOBTC", "MCOETH", "MCOUSD", "MANAETH", "MANABTC", "CPAYETH", "DATABTC", "DATAETH", "DATAUSD", "UTTBTC", "UTTETH", "UTTUSD", "KMDBTC", "KMDETH", "KMDUSD", "QTUMUSD", "QTUMBTC", "SNTUSD", "OMGUSD", "EKOBTC", "EKOETH", "ADXBTC", "ADXUSD", "LSKETH", "LSKUSD", "PLRUSD", "SURUSD", "BQXUSD", "DRTUSDT", "REPETH", "REPUSDT", "WAXPBTC", "WAXPETH", "WAXPUSD", "C20BTC", "C20ETH", "IDHBTC", "IDHETH", "IPLBTC", "COVBTC", "COVETH", "SENTBTC", "SENTETH", "SENTUSD", "SMTBTC", "SMTETH", "SMTUSD", "CHATBTC", "CHATETH", "CHATUSD", "TRACETH", "JNTETH", "UTKBTC", "UTKETH", "UTKUSD", "GNXETH", "CHSBBTC", "CHSBETH", "DAYBTC", "DAYETH", "DAYUSD", "NEUBTC", "NEUETH", "NEUUSD", "TAUBTC", "FLPBTC", "FLPETH", "FLPUSD", "EKOUSDT", "BCPTETH", "BCPTUSDT", "PKTBTC", "PKTETH", "BETRBTC", "BETRETH", "CHPETH", "BCPTBTC", "ACTBTC", "ACTETH", "ACTUSD", "ADABTC", "ADAETH", "ADAUSD", "SIGBTC", "MTXBTC", "MTXETH", "MTXUSD", "BDGETH", "DATXBTC", "DATXETH", "TRUEBTC", "DRGBTC", "DRGETH", "BANCABTC", "BANCAETH", "ZAPETH", "ZAPUSD", "AUTOBTC", "SOCBTC", "OCNBTC", "OCNETH", "XLMBTC", "XLMETH", "XLMUSD", "IOTABTC", "IOTAETH", "IOTAUSD", "DRTBTC", "BETRUSD", "ERTBTC", "CRPTBTC", "CRPTUSD", "MESHBTC", "MESHETH", "MESHUSD", "IHTBTC", "IHTETH", "IHTUSD", "SCCBTC", "YCCBTC", "NCTBTC", "NCTETH", "NCTUSD", "BMHBTC", "BANCAUSD", "BERRYBTC", "BERRYETH", "BERRYUSD", "GBXBTC", "GBXETH", "GBXUSD", "SHIPBTC", "SHIPETH", "NANOBTC", "NANOETH", "NANOUSD", "LNCBTC", "KINETH", "ARDRUSD", "FOTAETH", "FOTABTC", "CVTBTC", "CVTETH", "CVTUSD", "GNTBTC", "GNTETH", "GNTUSD", "GETBTC", "MITHBTC", "MITHETH", "MITHUSD", "DADIUSD", "TKYBTC", "ACATBTC", "ACATETH", "ACATUSD", "BTXUSD", "WIKIBTC", "WIKIETH", "WIKIUSD", "ONTBTC", "ONTETH", "ONTUSD", "FTXBTC", "FTXETH", "VMEETH", "LNDETH", "NANJBTC", "NTKBTC", "NTKETH", "NTKUSD", "AUCBTC", "AUCETH", "CMCTBTC", "CMCTETH", "CMCTUSD", "MANBTC", "MANETH", "MANUSD", "PNTBTC", "PNTETH", "FXTBTC", "NEXOBTC", "XMCBTC", "FXTETH", "XMCETH", "XMCUSDT", "FDZBTC", "FDZETH", "FDZUSD", "SPDBTC", "SPDETH", "MITXBTC", "HBZBTC", "FACEBTC", "FACEETH", "HBZETH", "HBZUSD", "CPTBTC", "HTMLBTC", "HTMLETH", "MITXETH", "BTSBTC", "BNKBTC", "BNKETH", "BNKUSD", "INKBTC", "IOSTBTC", "INKETH", "INKUSD", "CBCBTC", "IOSTUSD", "ZILBTC", "ABYSSBTC", "ABYSSETH", "ZILUSD", "BCIBTC", "CBCETH", "CBCUSD", "PITCHBTC", "PITCHETH", "HTMLUSD", "SBDETH", "SBDUSD", "UUUBTC", "UUUETH", "XBPBTC", "ELECBTC", "ELECETH", "ELECUSD", "IPLETH", "IPLUSD", "CENNZBTC", "CENNZETH", "SWMBTC", "SPFUSD", "SPFBTC", "LCCBTC", "HGTBTC", "ETHTUSD", "POSTUSD", "BSVBCH", "TRIGXBTC", "IQBTC", "IQUSD", "XNSBTC", "XNSUSD", "METPBTC", "METPETH", "METPUSD", "DRGNBTC", "REVBTC", "REVUSD", "SENSOUSD", "SOLOUSD", "CURBTC", "CURETH", "CURUSD", "LAVABTC", "CUREBTC", "TELBTC", "TELETH", "AYABTC", "AYAUSD", "BYTZBTC", "BYTZUSD", "XPRBTC", "XPRETH", "XPRUSD", "HEDGUSD", "ERKBTC", "ERKETH", "ERKUSD", "TNCBTC", "TNCUSD", "DNABTC",};

	public static void main(String[] args) {
		SpringApplication app = new SpringApplication(App.class);
		app.run(args);
	}

	private static final AtomicInteger numInits = new AtomicInteger(0);
	private static final AtomicInteger numUpdates = new AtomicInteger(0);

	@Override
	public void run(String... args) throws Exception {
		WsClient client = new WsClient();
		for (int i = 0; i < symbolNames.length; i++) {
			final String symbolName = symbolNames[i];
			log.info("adding symbol #{}: {} ", i + 1, symbolName);
			client.onOrderBookEvent(symbolName, new IOrderBookListener() {
				@Override
				public void initOrderBook(OrderBookWs orderBookWs) {
					numInits.incrementAndGet();
				}

				@Override
				public void updateOrderBook(OrderBookWs orderBookWs) {
					numUpdates.incrementAndGet();
				}

				@Override
				public void onFailure(Throwable cause) {
					log.error("failure on {}", symbolName, cause);
				}
			});
			log.info("numInits:{}, numUpdates:{}", numInits.get(), numUpdates.get());
			Thread.sleep(1000);
		}
	}
}
